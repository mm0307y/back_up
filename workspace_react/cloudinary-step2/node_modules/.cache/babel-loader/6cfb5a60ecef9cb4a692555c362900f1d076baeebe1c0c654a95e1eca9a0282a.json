{"ast":null,"code":"import { getAuth, GithubAuthProvider,\n//깃헙으로 로그인할때\nGoogleAuthProvider,\n// 구글에서 제공하는 제공자 정보\nsignInWithPopup // 구글 로그인 이중 화면 띄움\n} from \"firebase/auth\";\nclass AuthLogic {\n  // 클래스 선언\n  // 생성자 함수 - 전역 변수 초기화\n  constructor() {\n    // 사용자 정의 함수 구현\n    this.getUserAuth = () => {\n      return this.auth;\n    };\n    this.getGoogleAuthProvider = () => {\n      return this.googleProvider;\n    };\n    // 바닐라 스크립트에서 같은 이름의 함수를 지원하지 않는다.\n    this.auth = getAuth();\n    this.gitProvider = new GithubAuthProvider();\n    this.googleProvider = new GoogleAuthProvider();\n  }\n}\nexport default AuthLogic; // 외부 js에서 사용할 때 반드시 추가할 것\n\n// 로그인 풀렸을 때 처리 또는 로그인 세션시간이 만료되었을때\nexport const onAuthChange = auth => {\n  return new Promise(resolve => {\n    auth.onAuthStateChanged(user => {\n      resolve(user);\n    }); //end of onAuthStateChanged - 로그인 상태가 풀렸는지 체크하여 콜백함수에 파라미터로 사용자 정보를 쥐어줌\n  }); //end of Promise\n}; //end of onAuthChange\n\nexport const loginGoogle = (auth, googleProvider) => {\n  console.log(\"loginGoogle호출 성공\");\n  console.log(googleProvider);\n  return new Promise((resolve, reject) => {\n    signInWithPopup(auth, googleProvider) // 인증이 되는 동안 지연이 발생할 수 있다.\n    .then(result => {\n      // 내가 구글 회원이라면 프로필 정보를 쥐고 있다.\n      console.log(result); // object Object 출력 - 값이 안 보인다. - uid, displayName-realname, email\n      console.log(JSON.stringify(result)); // [object, Object]\n\n      const user = result.user; // 여기서 사용되는 user레이블은 구글에서 인증 후에 콜백으로 반환하는 값들 (Object)\n      console.log(user.uid);\n      resolve(user); // {uid:xxxxxxxxx, displayName: xxxxx, email: xxxxx}\n    }).catch(error => reject(error));\n    // 로그아웃 처리하기\n  });\n}; //// end of logoinGoogle\n\n// 로그아웃 버튼 클릭시 호출하기\nexport const logout = auth => {\n  return new Promise((resolve, reject) => {\n    // 로그아웃 처리하기\n    auth.signOut().catch(e => reject(e + \"로그아웃 오류 입니다.\"));\n    // localStorage.removeItem(\"userId\");\n    resolve();\n  });\n}; //// end of logout","map":{"version":3,"names":["getAuth","GithubAuthProvider","GoogleAuthProvider","signInWithPopup","AuthLogic","constructor","getUserAuth","auth","getGoogleAuthProvider","googleProvider","gitProvider","onAuthChange","Promise","resolve","onAuthStateChanged","user","loginGoogle","console","log","reject","then","result","JSON","stringify","uid","catch","error","logout","signOut","e"],"sources":["C:/Users/mtwd9/Desktop/Java/workspace_react/cloudinary-step2/src/service1212/authLogic1212.js"],"sourcesContent":["import {\r\n  getAuth,\r\n  GithubAuthProvider, //깃헙으로 로그인할때\r\n  GoogleAuthProvider, // 구글에서 제공하는 제공자 정보\r\n  signInWithPopup, // 구글 로그인 이중 화면 띄움\r\n} from \"firebase/auth\";\r\n\r\nclass AuthLogic {\r\n  // 클래스 선언\r\n  // 생성자 함수 - 전역 변수 초기화\r\n  constructor() {\r\n    // 바닐라 스크립트에서 같은 이름의 함수를 지원하지 않는다.\r\n    this.auth = getAuth();\r\n    this.gitProvider = new GithubAuthProvider();\r\n    this.googleProvider = new GoogleAuthProvider();\r\n  }\r\n  // 사용자 정의 함수 구현\r\n  getUserAuth = () => {\r\n    return this.auth;\r\n  };\r\n  getGoogleAuthProvider = () => {\r\n    return this.googleProvider;\r\n  };\r\n}\r\nexport default AuthLogic; // 외부 js에서 사용할 때 반드시 추가할 것\r\n\r\n// 로그인 풀렸을 때 처리 또는 로그인 세션시간이 만료되었을때\r\nexport const onAuthChange = (auth) => {\r\n  return new Promise((resolve) => {\r\n    auth.onAuthStateChanged((user) => {\r\n      resolve(user);\r\n    }); //end of onAuthStateChanged - 로그인 상태가 풀렸는지 체크하여 콜백함수에 파라미터로 사용자 정보를 쥐어줌\r\n  }); //end of Promise\r\n}; //end of onAuthChange\r\n\r\nexport const loginGoogle = (auth, googleProvider) => {\r\n  console.log(\"loginGoogle호출 성공\");\r\n  console.log(googleProvider);\r\n\r\n  return new Promise((resolve, reject) => {\r\n    signInWithPopup(auth, googleProvider) // 인증이 되는 동안 지연이 발생할 수 있다.\r\n      .then((result) => {\r\n        // 내가 구글 회원이라면 프로필 정보를 쥐고 있다.\r\n        console.log(result); // object Object 출력 - 값이 안 보인다. - uid, displayName-realname, email\r\n        console.log(JSON.stringify(result)); // [object, Object]\r\n\r\n        const user = result.user; // 여기서 사용되는 user레이블은 구글에서 인증 후에 콜백으로 반환하는 값들 (Object)\r\n        console.log(user.uid);\r\n        resolve(user); // {uid:xxxxxxxxx, displayName: xxxxx, email: xxxxx}\r\n      })\r\n      .catch((error) => reject(error));\r\n    // 로그아웃 처리하기\r\n  });\r\n}; //// end of logoinGoogle\r\n\r\n// 로그아웃 버튼 클릭시 호출하기\r\nexport const logout = (auth) => {\r\n  return new Promise((resolve, reject) => {\r\n    // 로그아웃 처리하기\r\n    auth.signOut().catch((e) => reject(e + \"로그아웃 오류 입니다.\"));\r\n    // localStorage.removeItem(\"userId\");\r\n    resolve();\r\n  });\r\n}; //// end of logout\r\n"],"mappings":"AAAA,SACEA,OAAO,EACPC,kBAAkB;AAAE;AACpBC,kBAAkB;AAAE;AACpBC,eAAe,CAAE;AAAA,OACZ,eAAe;AAEtB,MAAMC,SAAS,CAAC;EACd;EACA;EACAC,WAAWA,CAAA,EAAG;IAMd;IAAA,KACAC,WAAW,GAAG,MAAM;MAClB,OAAO,IAAI,CAACC,IAAI;IAClB,CAAC;IAAA,KACDC,qBAAqB,GAAG,MAAM;MAC5B,OAAO,IAAI,CAACC,cAAc;IAC5B,CAAC;IAXC;IACA,IAAI,CAACF,IAAI,GAAGP,OAAO,CAAC,CAAC;IACrB,IAAI,CAACU,WAAW,GAAG,IAAIT,kBAAkB,CAAC,CAAC;IAC3C,IAAI,CAACQ,cAAc,GAAG,IAAIP,kBAAkB,CAAC,CAAC;EAChD;AAQF;AACA,eAAeE,SAAS,CAAC,CAAC;;AAE1B;AACA,OAAO,MAAMO,YAAY,GAAIJ,IAAI,IAAK;EACpC,OAAO,IAAIK,OAAO,CAAEC,OAAO,IAAK;IAC9BN,IAAI,CAACO,kBAAkB,CAAEC,IAAI,IAAK;MAChCF,OAAO,CAACE,IAAI,CAAC;IACf,CAAC,CAAC,CAAC,CAAC;EACN,CAAC,CAAC,CAAC,CAAC;AACN,CAAC,CAAC,CAAC;;AAEH,OAAO,MAAMC,WAAW,GAAGA,CAACT,IAAI,EAAEE,cAAc,KAAK;EACnDQ,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC;EAC/BD,OAAO,CAACC,GAAG,CAACT,cAAc,CAAC;EAE3B,OAAO,IAAIG,OAAO,CAAC,CAACC,OAAO,EAAEM,MAAM,KAAK;IACtChB,eAAe,CAACI,IAAI,EAAEE,cAAc,CAAC,CAAC;IAAA,CACnCW,IAAI,CAAEC,MAAM,IAAK;MAChB;MACAJ,OAAO,CAACC,GAAG,CAACG,MAAM,CAAC,CAAC,CAAC;MACrBJ,OAAO,CAACC,GAAG,CAACI,IAAI,CAACC,SAAS,CAACF,MAAM,CAAC,CAAC,CAAC,CAAC;;MAErC,MAAMN,IAAI,GAAGM,MAAM,CAACN,IAAI,CAAC,CAAC;MAC1BE,OAAO,CAACC,GAAG,CAACH,IAAI,CAACS,GAAG,CAAC;MACrBX,OAAO,CAACE,IAAI,CAAC,CAAC,CAAC;IACjB,CAAC,CAAC,CACDU,KAAK,CAAEC,KAAK,IAAKP,MAAM,CAACO,KAAK,CAAC,CAAC;IAClC;EACF,CAAC,CAAC;AACJ,CAAC,CAAC,CAAC;;AAEH;AACA,OAAO,MAAMC,MAAM,GAAIpB,IAAI,IAAK;EAC9B,OAAO,IAAIK,OAAO,CAAC,CAACC,OAAO,EAAEM,MAAM,KAAK;IACtC;IACAZ,IAAI,CAACqB,OAAO,CAAC,CAAC,CAACH,KAAK,CAAEI,CAAC,IAAKV,MAAM,CAACU,CAAC,GAAG,cAAc,CAAC,CAAC;IACvD;IACAhB,OAAO,CAAC,CAAC;EACX,CAAC,CAAC;AACJ,CAAC,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}